<template name="emailOverlay">
	{{#momentum plugin='animate-css' sKlass='email-overlay' timeout=5000}}
		{{> Template.dynamic template=dialog}}
	{{/momentum}}
</template>

<template name="composeEmail">
	<div class="email-dialog dialog dynamic_color" data-color="{{globalPallet.utility}}">
		<div class="dialog-heading">
			<h4>Email me</h4>
			<a href="#" class="close-button js_close_dialog" title="Menu">
				{{> SVGicon name="cross"}}
			</a>
		</div>
		<div class="dialog-form">
			<form id="emailForm">
				<div class="sender-info">
					{{>formField label_text="Enter a name" name="name" placeholder="Please enter your name" type="text" value=name isRequired=true}}
					{{>formField label_text="Enter an email address" name="email" placeholder="Please enter your email address" type="email" value=email isRequired=true}}
				</div>
				<div class="message">
					{{>formField label_text="Enter a subject" name="subject" placeholder="Please enter a subject" type="text" value=subject isRequired=true}}
					{{>formField label_text="Enter a message" name="message" placeholder="Please type in your message" type="textarea" value=message isRequired=true}}
				</div>
			</form>
		</div>
		<div class="dialog-controls">
			<a type="button" class="dialog-secondary-btn js_clear_email" href="#" title="Clear">Clear</a>
			<a type="button" class="dialog-cta-btn dynamic_color js_send_email" data-color="{{globalPallet.cta}}" href="#" title="Send">Send</a>
		</div>
	</div>
</template>

<template name="formField">
	<label class="{{#if value}}in-use{{/if}}">
		<span class="label-text">
			{{label_text}}
		</span>
		
		{{#if isTextarea type}}
		<textarea required="{{isRequired}}" name="{{name}}" placeholder="{{placeholder}}" rows="10">{{value}}</textarea>		
		{{else}}
		<input required="{{isRequired}}" type="{{type}}" name="{{name}}" placeholder="{{placeholder}}" value="{{value}}">		
		{{/if}}

		{{>formError name}}
	</label>
</template>

<template name="formError">
	{{#if errors this}}
	<span class="error-text">
		{{#each err in errors this}}
			{{err}};&emsp;
		{{/each}}
	</span>
	{{/if}}
</template>

<template name="successDialog">
	<div class="success-dialog dialog dynamic_color" data-color="{{globalPallet.cta}}">
		<div class="dialog-heading">
			<h4>Email sent</h4>
			<a href="#" class="close-button js_close_dialog" title="Menu">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
			</a>
		</div>
		<div class="dialog-body">
			<p>
			Thank you! I'll be in touch with you soon.			
			</p>
		</div>
		<div class="dialog-controls">
			<a type="button" class="dialog-cta-btn dynamic_color js_close_dialog" data-color="{{globalPalet.cta}}" href="#" title="OK">OK</a>
		</div>
	</div>
</template>